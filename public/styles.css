:root {
  --bg: #0f1220;
  --panel: #171a2b;
  --accent: #5dd0ff;
  --text: #e9eef5;
  --muted: #9aa3b2;
  --danger: #ff6b6b;
  --ok: #48ff00;
  --dice-size: 100px;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  height: 100%;
  background: radial-gradient(1000px 600px at 70% 10%, #1b2140, #0f1220);
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  -webkit-font-smoothing: antialiased;
  -webkit-touch-callout: none;
  user-select: none;
}

.center-wrap {
  min-height: 100%;
  display: grid;
  place-items: center;
  padding: 16px;
}

/* Reusable utility classes consolidated from inline styles and embedded <style> blocks */
.centered {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.full-center-vertical {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 24px;
  padding: 20px;
}

.text-center { text-align: center; }

.login-title { text-shadow: 0 0 8px rgb(0, 128, 255); font-size: clamp(1.5rem, 6vw, 2.5rem); }

.button-full { width: 100%; display: block; margin-top: 16px; }

.img-fit { width: 100%; height: 100%; object-fit: contain; }

.flex-center { display: flex; justify-content: center; align-items: center; }
.flex-gap-center { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }

/* Winner specific */
.winner-avatar { width: 180px; height: 180px; border-radius: 50%; border: 4px solid var(--ok); background: #0f1429; box-shadow: 0 0 20px rgba(72,255,0,0.4); margin: 20px auto; }
.winner-title { font-size: 2.5rem; font-weight: 700; color: var(--ok); margin: 0 0 16px; text-shadow: 0 0 20px rgba(72,255,0,0.3); }
.winner-name { font-size: 2rem; color: var(--text); margin: 0 0 8px; }

/* Test page grid */
.test-grid { display: grid; grid-template-columns: repeat(3, 100px); grid-template-rows: repeat(3, 100px); gap: 5px; width: max-content; margin: 20px auto; }
.test-cell { display:flex; justify-content:center; align-items:center; border:none; font-size:24px; font-weight:700; position:relative; }
.test-number { position:absolute; top:5px; left:5px; font-size:14px; color:#666; }

/* Waiting page */
.waiting-message { font-size: 2rem; font-weight: 600; text-align: center; color: var(--text); animation: pulse 1.5s ease-in-out infinite; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.6; } }
.player-info { text-align: center; color: var(--muted); font-size: 1.1rem; }

/* Winner page styles */
.winner-container { display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:100vh; gap:32px; padding:20px; }
.winner-header { text-align:center; }
.score-display { background: var(--panel); border: 2px solid var(--ok); border-radius: 16px; padding: 32px; text-align: center; min-width: 300px; box-shadow: 0 0 30px rgba(72,255,0,0.2); }
.score-label { font-size: 1.2rem; color: var(--muted); margin-bottom: 12px; }
.score-value { font-size: 3rem; font-weight: 700; color: var(--ok); }
.back-button { margin-top: 32px; padding: 12px 32px; font-size: 1rem; }

@media (max-width: 480px) {
  .winner-container { gap: 24px; }
  .winner-title { font-size: 1.8rem; }
  .winner-name { font-size: 1.5rem; }
  .winner-avatar { width: 120px; height: 120px; }
  .score-display { min-width: 250px; padding: 24px; }
  .score-value { font-size: 2.5rem; }
}

/* Exit button centering */
#exitBtn { display: block; margin: 12px auto; width: auto; }

/* Center Nuevo button (game.html) */
#newGameBtn { display: block; margin: 12px auto; width: auto; }

/* Dice/grid specific styles from game.html */
.dice-grid { display: grid; grid-template-columns: repeat(3, var(--dice-size)); grid-auto-rows: var(--dice-size); gap: 10px; justify-content: center; margin: 12px 0; }
.grid-cell { position: relative; width: var(--dice-size); height: var(--dice-size); border: none; display: flex; align-items: center; justify-content: center; border-radius: 8px; transition: all 0.2s ease; }
.grid-cell.held { border: 4px solid #1aff00; box-shadow: 0 0 8px rgba(26,255,0,0.3); }
.cell-num { position: absolute; top: 6px; left: 8px; font-size: 12px; color: #666; }
.die-img { width: 100%; height: 100%; cursor: pointer; }
.roll-icon { width: 24px; height: 24px; border-radius: 50%; background: #ff4444; border: 2px solid #cc0000; transition: all 0.3s ease; }
.roll-icon.active { background: #4CAF50; border-color: #2e7d32; box-shadow: 0 0 8px rgba(76,175,80,0.5); }
.roll-button { flex: 1; min-width: 100px; }

.roll-icons { margin: 16px 0; display: flex; gap: 12px; justify-content: center; align-items: center; }
/* Card that fits its content (used by new_game options) */
.card-fit {
  background: var(--panel);
  border: 1px solid #232a45;
  border-radius: 12px;
  padding: 20px;
  display: inline-block;
  max-width: 90vw;
}

/* New game page tweaks (removed fixed margin) */

.card {
  background: var(--panel);
  border: 1px solid #232a45;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
  padding: 24px;
  width: min(480px, 90vw);
}

h1,
h2,
h3 {
  margin: 0 0 16px;
}

.input-row {
  display: grid;
  gap: 8px;
  margin-bottom: 16px;
}

label {
  font-size: 0.95rem;
  color: var(--muted);
}

input[type="text"] {
  width: 100%;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid #2b355a;
  background: #0f1429;
  color: var(--text);
  font-size: 16px;
  min-height: 44px;
}

.button-blue {
  background: linear-gradient(180deg, #18456a, #103152);
  border: none;
  color: white;
  padding: 12px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  min-height: 44px;
  -webkit-tap-highlight-color: transparent;
}

.button-blue[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

.button-red {
  background: linear-gradient(180deg, #6a1818, #521010);
  border: none;
  color: white;
  padding: 12px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  min-height: 44px;
  -webkit-tap-highlight-color: transparent;
}

.button-red[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
}

.small {
  font-size: 0.9rem;
  color: var(--muted);
}

.layout {
  display: grid;
  gap: 16px;
  grid-template-columns: 25% 50% 25%;
  align-items: center;
  padding: 16px;
}

.layout-centered {
  display: grid;
  grid-template-columns: auto auto auto;
  gap: 0;
  place-content: center;
  padding: 16px;
}

.layout-centered > .panel {
  width: fit-content;
}

#dicePanel {
  width: 100%;
}

.panel {
  margin-left: auto;
  margin-right: auto;
  width: fit-content;
  background: var(--panel);
  border: 1px solid #232a45;
  border-radius: 12px;
  padding: 8px;
  /*margin: 8px 0;*/
}

/* Compact footer title styling */
.footer-title {
  width: fit-content;
  text-align: center;
  padding: 8px 12px;
  margin: 12px auto 24px auto;
}
.footer-title h1 { font-size: 1rem; margin: 0 0 6px; }
.footer-title h2 { font-size: 0.85rem; margin: 0; color: var(--muted); }

.players ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.players li {
  display: flex;
  justify-content: space-between;
  padding: 6px 4px;
  border-bottom: 1px dashed #2b355a;
}

.badge {
  font-size: 0.75rem;
  padding: 2px 6px;
  border-radius: 8px;
  background: #243153;
  color: var(--accent);
}

.dice-area {
  display: grid;
  place-items: center;
  gap: 12px;
}

.dice-row {
  display: flex;
  gap: 12px;
}

.rolls {
  color: var(--muted);
  font-size: 0.95rem;
}

.score-table th,
.score-table td {
  border-bottom: 1px solid #222a48;
  padding: 6px 8px;
}

.score-table tr.clickable:hover {
  background: #1a2343;
  cursor: pointer;
}

.score-table .me {
  color: var(--accent);
}

.score-table .used {
  color: var(--muted);
  text-align: center;
}

.score-table .cat {
  font-weight: 600;
}

.score-table .pts {
  text-align: center;
}

/* removed custom score color */

.notice {
  color: var(--muted);
}

.winner {
  font-size: 1.1rem;
  color: var(--ok);
  font-weight: 700;
}

#msg {
  text-align: center;
  color: red;
  font-weight: 600;
  /* opcional para darle  font-weight: 600; /* opcional para darle más énfasis */
}

#connectBtn {
  display: block;
  margin: 16px auto;
  /* auto en los lados centra horizontalmente */
}

/* El envoltorio de la tabla se ajusta al ancho de la tabla */
#sheet {
  display: inline-block;
  /* Se encoge al tamaño de la tabla */
}

/* Envoltura: centra horizontalmente el panel Planilla */
.planilla-wrap {
  display: flex;
  justify-content: center;
  /* centra en horizontal */
  width: 100%;
  /* ocupa todo el ancho disponible */
  padding: 16px 0;
  /* opcional: separación vertical */
}

/* El panel Planilla se adapta al contenido */
#planilla-container {
  width: fit-content;
  margin-left: 0px; margin-right: auto;
  /* el ancho del panel = ancho de la tabla */
  /*max-width: 100%;*/
  /* por si en móviles crece  max-width: 100%;           /* por si en móviles crece demasiado */
}


/* Mobile: force OPCIONES and SCORE to appear side-by-side when possible */
@media (max-width: 540px) {
  .layout {
    grid-template-columns: 1fr;
    /* single column layout on small screens */
    padding: 8px;
  }

  /* Force options and score panels to occupy left and right halves */
  .scores-wrap {
    display: flex;
    gap: 12px;
    flex-wrap: nowrap;
    justify-content: space-between; /* push one to left and the other to right */
    align-items: flex-start;
    width: 100%;
    padding: 0 6px;
  }

  .scores-wrap > .panel {
    flex: 0 0 48%; /* fixed ~half width each */
    min-width: 120px;
    box-sizing: border-box;
    margin: 0;
  }

  #options-panel {
    width: fit-content;
    margin-left: auto;
    margin-right: 0px;
  }

  /* allow the score table to scroll horizontally if it's too wide */
  #sheet {
    display: block;
    max-width: 100%;
    overflow-x: auto;
  }
}

.avatar-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
  gap: 8px;
}

.avatar-btn {
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 4px;
  background: #0f1429;
  cursor: pointer;
}

.avatar-btn.selected {
  border-color: var(--accent);
  box-shadow: 0 0 10px rgba(93, 208, 255, .35);
}

.avatar-btn img {
  display: block;
  width: 100%;
  height: auto;
  border-radius: 10px;
}

/* Panel superior de jugadores centrado */
.top-players {
  width: fit-content;
  display: flex;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
  padding: 12px 0;
}

.player-name {
  font-size: 1.5rem;
  color: var(--text);
}

.player-total {
  font-size: .8rem;
  color: var(--muted);
}

/* Dados con imagen */
.die {
  width: clamp(80px, 15vw, 133px);
  height: clamp(80px, 15vw, 133px);
  margin: 8px;
  border-radius: 14px;
  background: #0f1429;
  border: 2px solid #2b355a;
  position: relative;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, .35);
  display: grid;
  place-items: center;
  cursor: pointer;
}

.die.held {
  border-color: var(--ok);
  box-shadow: 0 0 16px rgba(40, 199, 111, .3), inset 0 0 20px rgba(0, 0, 0, .35);
}

/*
.die-img {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 12px;
}
*/

/* Contenedor horizontal para Opciones + Planilla */
.scores-wrap {
  display: flex;
  flex-direction: row;
  gap: 16px;
  justify-content: space-between;
  /* push panels to left and right */
  align-items: flex-start;
  /* alinea arriba los dos paneles */
  flex-wrap: nowrap;
  /* nunca apilen */
  padding: 16px 0;
  width: 100%;
  margin: 0;
}

/* La tabla solo ocupa el ancho del contenido (no 100%) */
.score-table {
  width: fit-content;
  border-collapse: collapse;
  margin: 0;
}

/* Hover solo cuando es clicable */
.score.score-table tr.clickable:hover {
  background: #1a2343;
  cursor: pointer;
}

.score-table tr:not(.clickable) {
  cursor: default;
}

/* Centrar solo las celdas con puntuación elegida en la planilla */
.score-table td.score {
  text-align: center;
}

#topPlayers {
  display: flex;
  justify-content: center;
}

/* Tarjeta de jugador (por si faltaba) */
.player-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  min-width: 156px;
  /* opcional: asegura presencia visual */
}

/* Avatar (estilos previos tuyos) */
.player-avatar {
  width: 128px;
  height: 128px;
  border-radius: 50%;
  border: 2px solid #2b355a;
  background: #0f1429;
  box-shadow: inset 0 0 12px rgba(0, 0, 0, .35);
}

/* Opcional: resaltar turno actual */
.player-card.turn .player-avatar {
  border-color: var(--accent);
  box-shadow: 0 0 12px rgba(93, 208, 255, .4);
}

.row {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  /* izquierda / centro / derecha */
  align-items: center;
  /* alinea verticalmente en la fila */
  column-gap: 0.5rem;
  /* opcional: separación pequeña */
}

/* Izquierda */
#scoreSelection {
  grid-column: 1;
  /* ocupa la columna izquierda */
  justify-self: start;
  /* pegado al borde izquierdo */
  white-space: nowrap;
  /* opcional: evitar saltos de línea */
}

/* Centro (exacto) */
#generalScore {
  grid-column: 2;
  /* ocupa la columna central */
  justify-self: center;
  /* centrado dentro de su columna */
  white-space: nowrap;
  /* opcional */
}

.centered {
  display: flex;
  /* activa flexbox */
  flex-direction: column;
  /* coloca los hijos en columna */
  width: fit-content;
  /*margin: auto;*/
  justify-content: center;
  /* centra verticalmente dentro del contenedor */
  align-items: center;
  /* centra horizontalmente */
  background: var(--panel);
  border: 1px solid #232a45;
  border-radius: 12px;
  padding: 12px;
  text-align: center;
  margin: 8px 0;
}

.button_style {
  width: 100%;
  background: linear-gradient(180deg, #2b8fe0, #246db5);
  border: none;
  color: white;
  padding: 12px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}

/* Estilo de las opciones desplegadas */
.button_style option {
  background: #246db5;
  /* fondo de las opciones */
  color: white;
  /* texto en blanco */
  font-weight: 600;
}

.test_centered {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.test_background {
  width: fit-content;
  background: var(--panel);
  border: 1px solid #232a45;
  border-radius: 12px;
  padding: 12px;
  text-align: center;
  margin: 8px 0;
}

/* Mobile-Responsive Media Queries */
@media (max-width: 768px) {
  .card {
    width: 95vw;
    padding: 16px;
  }

  .layout {
    grid-template-columns: 1fr;
    padding: 8px;
    gap: 12px;
  }

  .centered {
    width: 90vw;
    padding: 16px;
    margin: 12px auto;
  }

  .scores-wrap {
    display: flex;
    flex-direction: row; /* keep row, not column */
    gap: 12px;
    justify-content: space-between;
    flex-wrap: nowrap;
    padding: 8px;
    width: 100%;
    align-items: flex-start;
  }

  .dice-row {
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  .die {
    width: clamp(70px, 18vw, 120px);
    height: clamp(70px, 18vw, 120px);
    margin: 4px;
  }

  .player-avatar {
    width: 80px;
    height: 80px;
  }

  .player-card {
    min-width: 100px;
  }

  #topPlayers {
    width: 100%;
    max-width: 100%;
    padding: 8px;
  }

  .avatar-btn {
    padding: 2px;
  }

  .avatar-btn img {
    min-width: 50px;
  }

  h1,
  h2,
  h3 {
    font-size: clamp(1.2rem, 5vw, 2rem);
  }

  .score-table {
    font-size: 0.85rem;
  }

  .score-table th,
  .score-table td {
    padding: 4px 6px;
  }

  input[type="text"] {
    font-size: 16px;
  }

  select.button_style {
    font-size: 16px;
    min-height: 44px;
    padding: 10px 12px;
  }
}

@media (max-width: 480px) {
  .card {
    width: 100vw;
    border-radius: 8px;
    padding: 12px;
  }

  .center-wrap {
    padding: 8px;
  }

  .avatar-grid {
    grid-template-columns: repeat(4, 1fr);
  }

  button {
    width: 100%;
    padding: 12px;
    font-size: 0.95rem;
  }

  .dice-row {
    gap: 6px;
  }

  .die {
    width: clamp(60px, 16vw, 100px);
    height: clamp(60px, 16vw, 100px);
    margin: 2px;
  }

  .player-avatar {
    width: 60px;
    height: 60px;
  }

  .player-name {
    font-size: 1rem;
  }

  .layout {
    padding: 4px;
  }

  .scores-wrap {
    padding: 4px;
  }

  h1,
  h2,
  h3 {
    margin: 0 0 12px;
  }

  .score-table {
    font-size: 0.75rem;
    width: 100%;
    overflow-x: auto;
  }

}

/* Override stacking rules: force side-by-side on narrow phones when desired */
@media (max-width: 480px) {
  .scores-wrap {
    display: flex !important;
    flex-direction: row !important; /* force row, override column from 768px */
    flex-wrap: nowrap !important;
    justify-content: space-between !important;
    gap: 8px !important;
    padding: 4px !important;
    width: 100% !important;
    align-items: flex-start !important;
  }

  .scores-wrap > .panel {
    flex: 0 0 48% !important;
    width: auto !important;
    max-width: 48% !important;
    box-sizing: border-box !important;
    margin: 0 !important;
  }

  /* Ensure the score table can scroll horizontally */
  .scores-wrap #sheet {
    overflow-x: auto !important;
    max-width: 100% !important;
  }
}
  .scores-wrap #sheet {
    overflow-x: auto !important;
    max-width: 100% !important;
  }
